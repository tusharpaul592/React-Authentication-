{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Downloads\\\\Auth-Project 2\\\\01-starting-project\\\\src\\\\store\\\\auth-context.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext({\n  token: '',\n  isLoggedIn: false,\n  login: token => {},\n  logout: () => {}\n});\n\nconst calculateRemainingTime = expirationTime => {\n  const currentTime = new Date().getTime();\n  const adjExpirationTime = new Date(expirationTime).getTime();\n  const remainingDuration = adjExpirationTime - currentTime;\n  return remainingDuration;\n};\n\nexport const AuthContextProvider = props => {\n  _s();\n\n  const initialToken = localStorage.getItem('token');\n  const [token, setToken] = useState(initialToken);\n  const userisLoggedIn = !!token;\n\n  const logoutHandler = () => {\n    setToken(null);\n    localStorage.removeItem('token');\n  };\n\n  const loginHandler = (token, expirationTime) => {\n    setToken(token);\n    localStorage.setItem('token', token);\n    const remainingTime = calculateRemainingTime(expirationTime);\n    setTimeout(logoutHandler, remainingTime);\n  };\n\n  const contextValue = {\n    token: token,\n    isLoggedIn: userisLoggedIn,\n    login: loginHandler,\n    logout: logoutHandler\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 12\n  }, this);\n};\n\n_s(AuthContextProvider, \"ZD9LjdYxVZrVB5iMyTOvmeLl2Yc=\");\n\n_c = AuthContextProvider;\nexport default AuthContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["React","useState","AuthContext","createContext","token","isLoggedIn","login","logout","calculateRemainingTime","expirationTime","currentTime","Date","getTime","adjExpirationTime","remainingDuration","AuthContextProvider","props","initialToken","localStorage","getItem","setToken","userisLoggedIn","logoutHandler","removeItem","loginHandler","setItem","remainingTime","setTimeout","contextValue","children"],"sources":["C:/Users/LENOVO/Downloads/Auth-Project 2/01-starting-project/src/store/auth-context.js"],"sourcesContent":["\r\nimport React from 'react'\r\nimport { useState } from 'react';\r\n\r\n\r\nconst AuthContext=React.createContext({\r\n    token:'',\r\n    isLoggedIn:false,\r\n    login: (token)=>{},\r\n    logout:()=>{}\r\n});\r\nconst calculateRemainingTime=(expirationTime)=>{\r\n    const currentTime=new Date().getTime();\r\n    const adjExpirationTime=new Date(expirationTime).getTime();\r\n    const remainingDuration= adjExpirationTime-currentTime;\r\n    return remainingDuration;\r\n\r\n}\r\n\r\nexport const AuthContextProvider=(props)=>{\r\n    const initialToken=localStorage.getItem('token')\r\n    const[token,setToken]=useState(initialToken);\r\n    const userisLoggedIn=!! token;\r\n\r\n    const logoutHandler=()=>\r\n    {\r\n        setToken(null)\r\n        localStorage.removeItem('token')\r\n    }\r\n    const loginHandler=(token,expirationTime)=>\r\n    {\r\n        setToken(token)\r\n        localStorage.setItem('token',token);\r\n        const remainingTime=calculateRemainingTime(expirationTime);\r\n        setTimeout(logoutHandler,remainingTime);\r\n    }\r\n    const contextValue={\r\n        token:token,\r\n        isLoggedIn:userisLoggedIn,\r\n        login:loginHandler,\r\n        logout:logoutHandler\r\n    };\r\n\r\n   return (<AuthContext.Provider value={contextValue}>{props.children}</AuthContext.Provider>);\r\n}\r\nexport default AuthContext"],"mappings":";;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,OAAzB;;AAGA,MAAMC,WAAW,gBAACF,KAAK,CAACG,aAAN,CAAoB;EAClCC,KAAK,EAAC,EAD4B;EAElCC,UAAU,EAAC,KAFuB;EAGlCC,KAAK,EAAGF,KAAD,IAAS,CAAE,CAHgB;EAIlCG,MAAM,EAAC,MAAI,CAAE;AAJqB,CAApB,CAAlB;;AAMA,MAAMC,sBAAsB,GAAEC,cAAD,IAAkB;EAC3C,MAAMC,WAAW,GAAC,IAAIC,IAAJ,GAAWC,OAAX,EAAlB;EACA,MAAMC,iBAAiB,GAAC,IAAIF,IAAJ,CAASF,cAAT,EAAyBG,OAAzB,EAAxB;EACA,MAAME,iBAAiB,GAAED,iBAAiB,GAACH,WAA3C;EACA,OAAOI,iBAAP;AAEH,CAND;;AAQA,OAAO,MAAMC,mBAAmB,GAAEC,KAAD,IAAS;EAAA;;EACtC,MAAMC,YAAY,GAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAnB;EACA,MAAK,CAACf,KAAD,EAAOgB,QAAP,IAAiBnB,QAAQ,CAACgB,YAAD,CAA9B;EACA,MAAMI,cAAc,GAAC,CAAC,CAAEjB,KAAxB;;EAEA,MAAMkB,aAAa,GAAC,MACpB;IACIF,QAAQ,CAAC,IAAD,CAAR;IACAF,YAAY,CAACK,UAAb,CAAwB,OAAxB;EACH,CAJD;;EAKA,MAAMC,YAAY,GAAC,CAACpB,KAAD,EAAOK,cAAP,KACnB;IACIW,QAAQ,CAAChB,KAAD,CAAR;IACAc,YAAY,CAACO,OAAb,CAAqB,OAArB,EAA6BrB,KAA7B;IACA,MAAMsB,aAAa,GAAClB,sBAAsB,CAACC,cAAD,CAA1C;IACAkB,UAAU,CAACL,aAAD,EAAeI,aAAf,CAAV;EACH,CAND;;EAOA,MAAME,YAAY,GAAC;IACfxB,KAAK,EAACA,KADS;IAEfC,UAAU,EAACgB,cAFI;IAGff,KAAK,EAACkB,YAHS;IAIfjB,MAAM,EAACe;EAJQ,CAAnB;EAOD,oBAAQ,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEM,YAA7B;IAAA,UAA4CZ,KAAK,CAACa;EAAlD;IAAA;IAAA;IAAA;EAAA,QAAR;AACF,CAzBM;;GAAMd,mB;;KAAAA,mB;AA0Bb,eAAeb,WAAf"},"metadata":{},"sourceType":"module"}